<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dataize - Step 3: Chart Generator</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="step3-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="step-indicator">
                    <div class="step" data-step="1">
                        <span class="step-number">1</span>
                        <span class="step-label">Data Upload</span>
                    </div>
                    <div class="step" data-step="2">
                        <span class="step-number">2</span>
                        <span class="step-label">Data Cleaning</span>
                    </div>
                    <div class="step active" data-step="3">
                        <span class="step-number">3</span>
                        <span class="step-label">Visualization</span>
                    </div>
                    <div class="step" data-step="4">
                        <span class="step-number">4</span>
                        <span class="step-label">Dashboard</span>
                    </div>
                </div>
                <h1 class="app-title">Dataize</h1>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <!-- Data Summary -->
                <div class="data-summary-card">
                    <h2>Create Visualizations</h2>
                    <div class="summary-stats">
                        <div class="stat">
                            <span class="stat-number" id="totalRows">0</span>
                            <span class="stat-label">Total Rows</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="totalColumns">0</span>
                            <span class="stat-label">Total Columns</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="chartsCreated">0</span>
                            <span class="stat-label">Charts Created</span>
                        </div>
                    </div>
                </div>

                <!-- Chart Creation Steps -->
                <div class="chart-creation">
                    <!-- Step 1: Select Metric -->
                    <div class="creation-step active" id="step1">
                        <div class="step-header">
                            <h3>Step 1: Select a Metric (Y-Axis)</h3>
                            <p>Choose what you want to measure in your chart</p>
                        </div>
                        
                        <div class="metric-tabs">
                            <button class="tab-btn active" data-type="field">Field Values</button>
                            <button class="tab-btn" data-type="calculated">Calculated Fields</button>
                            <button class="tab-btn" data-type="count">Count Records</button>
                        </div>

                        <div class="metric-options">
                            <!-- Field Values Option -->
                            <div class="metric-option active" id="fieldOption">
                                <h4>Select a Numeric Field</h4>
                                <div class="field-grid" id="numericFields">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>

                            <!-- Calculated Fields Option -->
                            <div class="metric-option" id="calculatedOption">
                                <h4>Choose a Calculation</h4>
                                <div class="calculation-options">
                                    <label class="radio-option">
                                        <input type="radio" name="calculated" value="average">
                                        <span class="radio-label">Average</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="calculated" value="sum">
                                        <span class="radio-label">Sum</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="calculated" value="text">
                                        <span class="radio-label">Most Common Text</span>
                                    </label>
                                </div>
                                
                                <div class="field-selectors">
                                    <div class="field-selector">
                                        <label>Average of:</label>
                                        <select id="averageField">
                                            <option value="">Select field...</option>
                                        </select>
                                    </div>
                                    <div class="field-selector">
                                        <label>Sum of:</label>
                                        <select id="sumField">
                                            <option value="">Select field...</option>
                                        </select>
                                    </div>
                                    <div class="field-selector">
                                        <label>Most common in:</label>
                                        <select id="textField">
                                            <option value="">Select field...</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Count Records Option -->
                            <div class="metric-option" id="countOption">
                                <h4>Count of Records</h4>
                                <p>This will count the number of records in your dataset</p>
                            </div>
                        </div>

                        <div class="step-actions">
                            <button class="btn btn-primary" id="nextToStep2" disabled>Next: Select Grouping</button>
                        </div>
                    </div>

                    <!-- Step 2: Select Grouping -->
                    <div class="creation-step" id="step2">
                        <div class="step-header">
                            <h3>Step 2: Select Grouping (X-Axis)</h3>
                            <p>Choose how to group your data</p>
                        </div>

                        <div class="grouping-options">
                            <h4>Select a Categorical Field</h4>
                            <div class="field-grid" id="categoricalFields">
                                <!-- Populated by JavaScript -->
                            </div>
                            
                            <div class="grouping-settings">
                                <label class="checkbox-option">
                                    <input type="checkbox" id="showOthers">
                                    <span class="checkbox-label">Show "Others" for small groups</span>
                                </label>
                                <label class="checkbox-option">
                                    <input type="checkbox" id="limitGroups">
                                    <span class="checkbox-label">Limit number of groups</span>
                                </label>
                                <div class="group-limit" id="groupLimitContainer" style="display: none;">
                                    <label for="groupLimit">Maximum groups:</label>
                                    <input type="number" id="groupLimit" value="10" min="1" max="50">
                                </div>
                            </div>
                        </div>

                        <div class="step-actions">
                            <button class="btn btn-outline" id="backToStep1">Back: Select Metric</button>
                            <button class="btn btn-primary" id="nextToStep3" disabled>Next: Choose Chart Type</button>
                        </div>
                    </div>

                    <!-- Step 3: Select Chart Type -->
                    <div class="creation-step" id="step3">
                        <div class="step-header">
                            <h3>Step 3: Choose Chart Type</h3>
                            <p>Select the best visualization for your data</p>
                        </div>

                        <div class="chart-options">
                            <div class="chart-option" data-type="bar">
                                <div class="chart-icon">ðŸ“Š</div>
                                <h4>Bar Chart</h4>
                                <p>Compare values across categories</p>
                            </div>
                            <div class="chart-option" data-type="line">
                                <div class="chart-icon">ðŸ“ˆ</div>
                                <h4>Line Chart</h4>
                                <p>Show trends over time</p>
                            </div>
                            <div class="chart-option" data-type="pie">
                                <div class="chart-icon">ðŸ¥§</div>
                                <h4>Pie Chart</h4>
                                <p>Show parts of a whole</p>
                            </div>
                            <div class="chart-option" data-type="table">
                                <div class="chart-icon">ðŸ“‹</div>
                                <h4>Table</h4>
                                <p>Display data in rows and columns</p>
                            </div>
                            <div class="chart-option" data-type="kpi">
                                <div class="chart-icon">ðŸ“Š</div>
                                <h4>KPI Card</h4>
                                <p>Show key metrics at a glance</p>
                            </div>
                        </div>

                        <div class="step-actions">
                            <button class="btn btn-outline" id="backToStep2">Back: Select Grouping</button>
                            <button class="btn btn-primary" id="nextToStep4" disabled>Next: Preview & Save</button>
                        </div>
                    </div>

                    <!-- Step 4: Preview & Save -->
                    <div class="creation-step" id="step4">
                        <div class="step-header">
                            <h3>Step 4: Preview & Save</h3>
                            <p>Review your chart and add it to your library</p>
                        </div>

                        <div class="preview-section">
                            <div class="chart-preview" id="chartPreview">
                                <!-- Chart will be rendered here -->
                            </div>
                            
                            <div class="chart-settings">
                                <div class="setting-group">
                                    <label for="chartTitle">Chart Title:</label>
                                    <input type="text" id="chartTitle" placeholder="Enter chart title...">
                                </div>
                            </div>
                            
                            <div class="chart-summary" id="chartSummary">
                                <!-- Chart summary will be populated here -->
                            </div>
                        </div>

                        <div class="step-actions">
                            <button class="btn btn-outline" id="backToStep3">Back: Choose Chart Type</button>
                            <button class="btn btn-primary" id="saveChart">Save to Library</button>
                        </div>
                    </div>
                </div>

                <!-- Create Another Chart -->
                <div class="create-another" id="createAnother" style="display: none;">
                    <div class="create-another-content">
                        <h3>Chart Saved Successfully!</h3>
                        <p>Your chart has been added to the visual library.</p>
                        <button class="btn btn-outline" id="createNewChart">Create Another Chart</button>
                    </div>
                </div>

                <!-- Visual Library -->
                <div class="visual-library" id="visualLibrary" style="display: none;">
                    <h3>Your Visual Library</h3>
                    <div class="library-grid" id="libraryGrid">
                        <!-- Charts will be displayed here -->
                    </div>
                </div>

                <!-- Navigation -->
                <div class="step-navigation">
                    <button class="btn btn-outline" id="prevBtn">Previous Step</button>
                    <button class="btn btn-primary" id="nextBtn" disabled>Next Step</button>
                </div>
            </div>
        </main>
    </div>

    <script src="step3-script.js"></script>
</body>
</html>